/* Copyright (c) 2008, Three Dub Media (http://threedubmedia.com)  */
(function(F){F.fn.delegate=function(I,H,J,K){return this.each(function(){F.event.delegate.add(this,I,H,J,K)})};F.fn.undelegate=function(I,H,J){return this.each(function(){F.event.delegate.remove(this,I,H,J)})};F.event.delegate={add:function(M,J,H,K,N){if(arguments.length<4){return }var I=B(H,A),L=F.data(M,"delegates")||F.data(M,"delegates",{});F.each(B(J,D),function(P,Q){var O=L[Q]||(L[Q]=[]);if(!O.length){F.event.add(M,Q,F.event.delegate.handle,L)}F.each(I,function(S,R){if(!R.length){return }O[O.length]={selector:R,handler:K,data:N}})})},remove:function(M,J,H,K){var I=B(H,A),L=F.data(M,"delegates")||{};if(M&&!J){F.each(L,function(N){F.event.remove(M,N,F.event.delegate.handle)});F.removeData(M,"delegates");return }F.each(B(J,D),function(N,O){if(H&&H.length){L[O]=F.grep(L[O]||[],function(Q,P){if(Q){F.each(I,function(S,R){if(Q.selector===R&&(!K||Q.handler===K)){return(P=false)}})}return(P!==false)});if(L[O].length){return }}F.event.remove(M,O,F.event.delegate.handle);delete L[O]})},handle:function(L){L.delegateParent=this;L.stopDelegation=function(){H=true};var M=L.target,K=arguments,J,H,I=(L.data||{})[L.type]||[];if(I.length){do{F.each(I,function(N,O){if(O&&F(M).matches(O.selector)){L.data=O.data;J=O.handler.apply(M,K);if(J===false||H===true){return false}}})}while(J!==false&&H!==true&&M!=this&&(M=M.parentNode))}return J}};F.fn.matches=function(J){if(typeof J!="string"){return false}var I=this,H;while(J.length&&I.length&&(H=E.exec(J))){I=I.setArray(F.filter(H[3],I).r);if(H[2]){I=I[G[H[2]]](H[1])}J=J.replace(H[0].substr(H[1]?H[1].length:0),"")}if(!C.test(J)&&!H){I=[]}return !!(I.length>0)};var E=(/(?:([^>+~\s]+)\s*([>+~\s])\s*)?([^>+~\s]+)\s*$/),D=(/\s+/),A=(/\s*,\s*/),C=(/^\s*$/),G={" ":"parents",">":"parent","+":"prev","~":"prevAll"};function B(I,H){return F.trim(I).split(H)}})(jQuery);